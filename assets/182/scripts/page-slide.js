which.pageSlide={supports_history_api:function(){return !!(window.history&&history.pushState)},loadContent:function(a){$.get(a,function(b){$("#slider").slideTo(b)})},pathFromURL:function(b){var a=window.location,d=a.protocol+"//",c=a.host+"/";return b.replace(d+c,"")},clickHandler:function(c){var a=c.currentTarget.href,b=which.pageSlide.pathFromURL(a);return window.history.pushState({path:b},"",a),which.pageSlide.loadContent(a),!1},popStateHandler:function(){which.pageSlide.loadContent(window.location.pathname)},applyListeners:function(){var b=this;$("#slider").delegate("#all-results-header a","click",function(a){return b.clickHandler(a)}),setTimeout(function(){$(window).bind("popstate",function(a){if(a.originalEvent.state&&a.originalEvent.state.path){b.popStateHandler(a.originalEvent);return false}b.popStateHandler();return true})},750)},updatePageSeo:function(b,a){var k=document,i=$("head"),f=$("#slider").data("pagecontext"),h=$("#all-results-header").find("h3").text(),c,g,e,d,j=i.find('meta[name="omniturePageName"]').attr("content");if(b!=="All brands"&&a){g=b+" - "+f.pageTitle;e=f.baseUrl+a.replace(which.pageSlide.pathFromURL(f.baseUrl),"");d=f.omnitureBasePageName+b.toLowerCase().replace(":","-");c="Which? have reviewed"+h.split("reviewed")[1]}if(b==="All brands"){g=f.pageTitle;e=f.baseUrl;d=f.omnitureBasePageName;c=f.originalMetaDesc}i.find('meta[name="description"]').attr("content",c);i.find("title").html(g);i.find('link[rel="canonical"]').attr("href",e.replace(/\/\//g,"/"));i.find('meta[name="omniturePageName"]').attr("content",d);i.find('meta[name="omnitureLastPageName"]').attr("content",j);return true},tracking:function(){if(typeof omnitureSiteCatalyst!=="undefined"){omnitureSiteCatalyst.exec()}},init:function(){if(!this.supports_history_api()){return}if(navigator.userAgent.match(/(iPod|iPhone|iPad)/)){return}which.pageSlide.applyListeners()}};$.fn.slideTo=function(e){var c=$("#content"),f=$("#slide-content"),g,b,a,d=parseInt(c.css("width"),10);c.css({overflow:"hidden"});f.css({width:"3000px"}).append(e).find("#product-table").css({"float":"left"});f.animate({marginLeft:"-"+d-10+"px"},400,function(){f.html(e).removeAttr("style");$("#product-table").css({"float":"none"});c.css({overflow:"visible"});a=$("#all-results-header").find("a.active");g=a.attr("title")||"All brands";b=a.attr("href")||"";which.pageSlide.updatePageSeo(g,b);which.pageSlide.tracking()})};which.pageSlide.init();