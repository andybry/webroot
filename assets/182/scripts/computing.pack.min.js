/*
 * jQuery validation plug-in 1.5.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2008 Jörn Zaefferer
 *
 * $Id: jquery.validate.js 6096 2009-01-12 14:12:04Z joern.zaefferer $
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var validator=$.data(this[0],'validator');if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});this.submit(function(event){if(validator.settings.debug)event.preventDefault();function handle(){if(validator.settings.submitHandler){validator.settings.submitHandler.call(validator,validator.currentForm);return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=false;var validator=$(this[0].form).validate();this.each(function(){valid|=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(a.value);},filled:function(a){return!!$.trim(a.value);},unchecked:function(a){return!a.checked;}});$.format=function(source,params){if(arguments.length==1)return function(){var args=$.makeArray(arguments);args.unshift(source);return $.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.validator=function(options,form){this.settings=$.extend({},$.validator.defaults,options);this.currentForm=form;this.init();};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)this.element(element);},highlight:function(element,errorClass){$(element).addClass(errorClass);},unhighlight:function(element,errorClass){$(element).removeClass(errorClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",dateDE:"Bitte geben Sie ein gültiges Datum ein.",number:"Please enter a valid number.",numberDE:"Bitte geben Sie eine Nummer ein.",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.format("Please enter no more than {0} characters."),minlength:$.format("Please enter at least {0} characters."),rangelength:$.format("Please enter a value between {0} and {1} characters long."),range:$.format("Please enter a value between {0} and {1}."),max:$.format("Please enter a value less than or equal to {0}."),min:$.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator");validator.settings["on"+event.type]&&validator.settings["on"+event.type].call(validator,this[0]);}$(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",delegate).delegate("click",":radio, :checkbox",delegate);if(this.settings.invalidHandler)$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.formSubmitted=false;this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value,element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method");throw e;}}if(dependencyMismatch)return;if(this.objectLength(rules))this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)return arguments[i];}return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method);if(typeof message=="function")message=message.call(this,rule.parameters,element);this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)toToggle=toToggle.add(toToggle.parents(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(label).length)this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){return this.errors().filter("[for='"+this.idOrName(element)+"']");},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))return this.findByName(element.name).filter(':checked').length;}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",previous={old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages}return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message;if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var options=$("option:selected",element);return options.length>0&&(element.type=="select-multiple"||($.browser.msie&&!(options[0].attributes['value'].specified)?options[0].text:options[0].value).length>0);case'input':if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])this.settings.messages[element.name]={};this.settings.messages[element.name].remote=typeof previous.message=="function"?previous.message(value):previous.message;param=typeof param=="string"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){if(response){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};errors[element.name]=response||validator.defaultMessage(element,"remote");validator.showErrors(errors);}previous.valid=response;validator.stopRequest(element,response);}},param));return"pending";}else if(this.pending[element.name]){return"pending";}return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},dateDE:function(value,element){return this.optional(element)||/^\d\d?\.\d\d?\.\d\d\d?\d?$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},numberDE:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9-]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9;}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param:"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){return value==$(param).val();}}});})(jQuery);;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}return(pendingRequests[port]=ajax.apply(this,arguments));}return ajax.apply(this,arguments);};})(jQuery);;(function($){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){if($.browser.msie)return false;this.addEventListener(original,$.event.special[fix].handler,true);},teardown:function(){if($.browser.msie)return false;this.removeEventListener(original,$.event.special[fix].handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};});$.extend($.fn,{delegate:function(type,delegate,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});},triggerEvent:function(type,target){return this.triggerHandler(type,[$.event.fix({type:type,target:target})]);}})})(jQuery);
var addthis_config={data_track_clickback:true,pubid:"which"};var which={loadTrackingImage:function(a){var b=document.createElement("img");b.src="//www.staticwhich.co.uk/assets/images/tracking-images/"+a+".gif";document.body.appendChild(b)},selectDrivenEnable:function(a,c,b){if($("#"+a).val()===c){$("#"+b).removeAttr("disabled")}else{$("#"+b).attr("disabled","disabled")}$("#"+a).change(function(){if($("#"+a).val()===c){$("#"+b).removeAttr("disabled")}else{$("#"+b).attr("disabled","disabled");$("p.error[htmlfor="+b+"]").remove()}})},showForJS:function(){$("#page .show-for-js").show()},printPage:function(){if(!document.getElementsByTagName){return}$("#content h1").attr("id","print-page-positioner").before('<p id="print-page-js"><a href="#">Print this page</a></p>');$("#print-page-js a").click(function(){window.print();return false})},enlargeImage:function(a){$(a+" a").click(function(){$("#enlarged-image").remove();$(this).parent().before('<div id="enlarged-image"><img src="/assets/images/icons/close.png" alt="Close" class="close" /><img src="'+this.href+'" height="400" width="400" alt="" /></div>');$("#enlarged-image").click(function(){$(this).remove()});return false})},contactUs:function(){var b=$("form.contact-form").find("div.which-member"),a=$("div.which-member input[@name=membershipNumberNoYes]:checked");b.on("click","label.membershipNumberNo input",function(){$("div.membership-number").slideUp("fast")});b.on("click","label.membershipNumberYes input",function(){$("div.membership-number").slideDown()});if(a.attr("id")==="membershipNumberYes"){a.trigger("click")}if(which.helpBubble){which.helpBubble.init("#content","#membershipnumber")}},socialBookmarks:function(b){var a=(b?b:"#socialbookmarks");$(a).append('<div class="addthis_toolbox addthis_default_style"><a class="addthis_button_email"></a><a class="addthis_button_twitter"></a><a class="addthis_button_favorites"></a><a class="addthis_button_facebook"></a><a class="addthis_button_google_plusone" g:plusone:count="false"></a><a class="addthis_button_compact"><img src="http://www.which.co.uk/assets/images/icons/more-bookmarks.jpg" width="76" height="16" alt="" border="0"/></a></div>');if(a==="#socialbookmarks"){$(a).prepend("<h3>Share, bookmark or subscribe</h3>");$.ajax({cache:true,dataType:"script",success:function(c){addthis.init()},url:"http://s7.addthis.com/js/250/addthis_widget.js"})}},socialBookmarksInNews:function(){var a=document,c=a.getElementById("breadcrumbs"),b;if(!c||a.getElementById("image-gallery")){return}c=c.getElementsByTagName("li");b=$("#content").find("img:first").parent();if(c&&c[2]&&c[2].innerHTML.toLowerCase().indexOf("/news/")>0&&c.length>4&&b.length>0){b.wrap('<div class="share-this-news"></div>');which.socialBookmarks("div.share-this-news")}},loadScript:function(b,c){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src=b.src;if(c&&c!=""){if(a.addEventListener){a.addEventListener("load",function(){c()},false)}else{a.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){c()}}}}document.body.appendChild(a)},loadStylesheet:function(a){var c=document,b=c.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=a;c.getElementsByTagName("head")[0].appendChild(b)},contentSlide:function(e){var b="Hide all details",c="Show all details",d='<a href="#" id="show-all-content">'+c+"</a>",a=e.find("h2:first");if(document.getElementById("tab-content")){return}else{this.categoryToggle(e.find("div"))}$("#show-all-content").toggle(function(){$("#report-listing").find("div.review-section").removeClass("collapsed").removeAttr("style").end().find("h2").removeClass("closed").addClass("open");$(this).html(b).blur();return false},function(){$("#report-listing").find("div.review-section").addClass("collapsed").removeAttr("style").end().find("h2").attr("class","closed");$(this).html(c).blur();return false})},categoryToggle:function(a){a.each(function(){$subCategory=$(this);$subCategoryHeader=$(this).find("h3");$subCategoryList=$(this).find("ul");if($(this).index()===1){$subCategoryHeader.addClass("open")}else{$subCategoryList.toggle();$subCategoryHeader.addClass("closed")}$subCategoryHeader.click(function(){$currentHeader=$(this);$currentHeader.parent().find("ul").slideToggle(1000,function(){if($(this).index()===1){$currentHeader.toggleClass("open");$currentHeader.toggleClass("closed")}});return false})})},productReviewContent:function(c){var b="h2",a="div.review-section";c.find(a).addClass("collapsed");c.find(b).addClass("closed");c.delegate(b,"click",function(){$(this).toggleClass("open").toggleClass("closed").next(a).slideToggle(500);return false});c.find(b).first().trigger("click")},modalSignup:function(){$("body").append('<div id="modalSignupDiv"><iframe id="modalSignupIFrame" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Signup"></iframe></div>');$("#modalSignupDiv").dialog({modal:true,autoOpen:false,height:"700",width:"980",draggable:false,resizeable:false,closeOnEscape:true,dialogClass:"signup-dialog",show:"fade",close:function(a,b){window.location.reload()}});$(".modalSignup").click(function(){$("#modalSignupDiv").dialog("option","title","Sign up to Which?");$("#modalSignupDiv").dialog("open");$("#modalSignupIFrame").attr("src","http://www.which.co.uk/signup");return false});if(/iPhone|iPod|iPad/.test(navigator.userAgent)){$("iframe").wrap(function(){var a=$(this);return $("<div />").css({width:a.attr("width"),height:a.attr("height"),overflow:"auto","-webkit-overflow-scrolling":"touch"})})}},tabController:function(d,e){e=d+" "+e;var a="",b=$(e).eq(0).text(),c;$(d).eq(0).before('<ul id="inpage-nav"><li class="on"><a href="#"><span>'+b+"</span></a></li></ul>");$(e).eq(0).addClass("removed");if($(d).length>1){for(c=1;c<=$(d).length-1;c+=1){$(d).eq(c).hide();a=$(e).eq(c).text();$(e).eq(c).addClass("removed");$("#inpage-nav").append('<li><a href="#"><span>'+a+"</span></a></li>")}}$("#inpage-nav li").click(function(){$(d).hide();$("#inpage-nav li.on").removeClass("on");$(this).addClass("on");var f=$("#inpage-nav li").index(this);$(d).eq(f).show();return false})},navigationHoverEnhancer:function(){if(!$.browser.opera){$("#tabs li").mouseover(function(){$("#tabs ul").removeClass("js-hover")});$("#tabs ul").bind("mouseleave",function(){$(this).addClass("js-hover")})}},ajaxLogReporter:function(c,d){var b="service/util/log",a='{"logMessage":{"message": "'+c+'", "ajaxRequestURL":"'+d+'"}}';$.ajax({type:"POST",url:b,data:a,dataType:"json",contentType:"application/json; charset=utf-8"})},createCookie:function(c,d,e){var b,a="";if(e){b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/"},readCookie:function(b){var f,a,d,e;a=document.cookie.split(";");e=b+"=";for(d=0;d<a.length;d+=1){f=a[d];while(f.charAt(0)===" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null},deleteCookie:function(a){which.createCookie(a,"",-1)},resetCookies:function(){var h,d,l,k,j,i;h=document.cookie.split("; ");j=0;i="Thu, 01 Jan 1970 00:00:00 GMT";for(k=0;k<h.length&&h[k];k+=1){j+=1;for(d="."+location.host;d;d=d.replace(/^(?:\.|[^\.]+)/,"")){for(l=location.pathname;l;l=l.replace(/.$/,"")){document.cookie=(h[k]+"; domain="+d+"; path="+l+"; expires="+i)}}document.cookie=h[k]+"; expires="+i}window.location.reload()},omnitureSwitchCharityIDs:function(){var b,a="?cid="+$("#charity-switch-form").attr("class");if(a.length>0){$("#tabs a, #sidebar a").each(function(){b=$(this).attr("href")+a;$(this).attr("href",b)});b=$("#charity-switch-form").attr("action")+a;$("#charity-switch-form").attr("action",b)}},pageReferrer:function(){if(!document.getElementsByTagName){return("")}var b,c=document.getElementsByTagName("meta"),a;for(b=0;b<c.length;b+=1){if(c[b].name==="referrerUrl"){a=c[b].content;return(a)}}return("")}};var pageInfo={url:location.href,urlContains:function(a){return(pageInfo.url.indexOf(a)>-1)?true:false}};function externalLinks(){$("#content").find("a[rel*=external]").live("click",function(){window.open(this.href);return false})}function printThisPage(){window.print();return false}function printPageLinks(){if(!document.getElementsByTagName){return}var b,c,a=document.getElementsByTagName("span");for(b=0;b<a.length;b+=1){c=a[b];if($(c).attr("class")==="js-print"){$(c).wrap('<a href="#"></a>');$(c).parent("a").click(printThisPage())}}}function hideForJS(){$(".js-hide").css({position:"absolute",left:"-99999px"})}var numCounter=0,numMaxAscensions=4,strErrorContainerClass="er",strErrorElement="body";function findErrorDiv(b){while(numCounter<numMaxAscensions){numCounter+=1;var a=b.hasClass(strErrorContainerClass);if(a){numCounter=0;return b}else{b=b.parent()}}return $(strErrorElement)}if(jQuery.validator){jQuery.validator.addMethod("money",function(b,a){return this.optional(a)||/^£?((\d{1,}(\.\d{1,2})?$)|((\d{1,3}(\,\d{3})*)((\.\d{2})?)$))/.test(b)},"Please enter a money value (e.g. 100,000.00 or 100000)");jQuery.validator.addMethod("moneywhole",function(b,a){return this.optional(a)||/^£?((\d{1,}$)|((\d{1,3}(\,\d{3})*)$))/.test(b)},"Please enter a whole money value (e.g. 100,000 or 100000)");jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^\w+$/i.test(b)},"Please enter an alphanumeric value")}function radioButtonControl(a){$("input[name="+a+"]").each(function(){if($(this).is(":checked")){$("#"+$(this).attr("id")+"-extra").css({position:"static",left:"auto"})}else{$("#"+$(this).attr("id")+"-extra").css({position:"absolute",left:"-99999px"})}})}function radioClickEvent(a){radioButtonControl(a);$("input[name="+a+"]").click(function(){radioButtonControl(a)})}var inPageNav={defaultAdtechPanel:"",init:function(){var b,d,a=$("#in-page-nav"),c=a.find("div.category-taster");c.find("h3.title").remove().end().hide();b=a.find(".current a").attr("href");d=$(b).html();$("#category-taster-holder").prepend(d);a.find("a.tab-label").click(function(){inPageNav.flip($(this).parent(),$(this).attr("href"));return false})},flip:function(b,a){var c=$(a).html();if($("#category-taster-holder #adtech-technology-verticaltop-np div").length>0){inPageNav.defaultAdtechPanel=$("#adtech-technology-verticaltop-np").wrap("<div>").parent().html()}if($(a).find(".adtech-promo").html()===""){c+=inPageNav.defaultAdtechPanel}$("#category-taster-holder").html(c);$("#in-page-nav").find("li.current").removeClass("current");b.addClass("current")},initHorizontal:function(){var b,d,a=$("#in-page-nav"),c=a.find("div.category-taster");c.find("h3.title").remove().end().hide();b=a.find(".current a").attr("href");d=$(b).html();$(b).find(".adtech-promo").attr("id","");$("#category-taster-holder").prepend(d);$("#in-page-nav").find("a.tab-label").click(function(){inPageNav.flipHorizontal($(this).parent(),$(this).attr("href"));return false})},flipHorizontal:function(b,a){var d=$("#category-taster-holder");if(d.find(".adtech-promo div").length>0){inPageNav.defaultAdtechPanel=d.find(".adtech-promo").html()}if($(a).find(".adtech-promo").html()===""){$(a).find(".adtech-promo").html(inPageNav.defaultAdtechPanel)}var c=$(a).html();d.html(c);$("#in-page-nav").find("li.current").removeClass("current");b.addClass("current")}};var moneyTables={init:function(){var c,a,b;$('#recommended-providers > div:not(".current-table")').hide();$("#recommended-providers h3.tab-title").each(function(e){var d=$(this);a=d.parent().attr("id");b=d.text();if(e===0){c='<li class="current">';c+='<a href="#'+a+'"><span>'+b+"</span></a></li>"}else{if(d.parent().find("table").length===0){c+='<li class="disabled">';c+="<span><span>"+b+"</span></span></li>"}else{c+="<li>";c+='<a href="#'+a+'"><span>'+b+"</span></a></li>"}}});$("#relationship-with-providers").hide().addClass("money-popup");$("#relationship-with-providers").append('<a id="relationship-with-providers-close-link">Close</a>');$("#relationship-with-providers").wrapInner('<div class="money-popup-inner" />');$("#recommended-providers h2").after('<a id="link-relationship-with-providers" href="#relationship-with-providers">How Which? makes money from its tables</a><ul id="money-nav">'+c+"</ul>");$("#recommended-providers h3.tab-title").remove();$('#recommended-providers #money-nav li:not(".disabled") a').click(function(){moneyTables.flip($(this));return false});$("#relationship-with-providers-close-link").click(function(){$("#relationship-with-providers").hide();return false});$("#link-relationship-with-providers").click(function(){$("#relationship-with-providers").show();return false})},flip:function(a){$("#recommended-providers li.current").first().removeClass("current");$("#recommended-providers div.current-table").first().removeClass("current-table").hide();a.parent().addClass("current");a.blur();a=$("#"+a.attr("href").split("#")[1]);a.addClass("current-table").fadeIn("slow")}};var homepage={counter:1,carousel:function(){var b=$("#home-intro"),c=$("#intro-tabs li a"),d=b.find("div:first div").attr("class"),a=(typeof(carouselProps)!=="undefined")?carouselProps:{};homepage.props=a;homepage.props.enabled=a.enabled||"on";homepage.props.opacityType=a.opacityType||"toggle";homepage.props.speedOut=a.speedOut||1000;homepage.props.speedIn=a.speedIn||1000;homepage.props.timeout=a.timeout||6000;b.addClass("js-enabled").tabs({fx:[{opacity:homepage.props.opacityType,duration:homepage.props.speedOut},{opacity:homepage.props.opacityType,duration:homepage.props.speedIn}]});c.first().addClass(d);if(homepage.props.enabled==="on"){b.tabs("rotate",homepage.props.timeout)}}};var MT={hideHelp:function(){if($("#contextual-help").length>0){$("#contextual-help").remove();$("div.help-wrapper").css("z-index","10")}},showHelp:function(d){var c,a=d.find("a.column-help").attr("href"),b;if(a.indexOf("#")>0){c=a.split("#");a="#"+c[1]}b=$(a).html();d.find("div.help-wrapper").append('<div id="contextual-help">'+b+"</div>");$("#contextual-help").append('<span id="close-contextual-help">X</span>').bind("click",function(){MT.hideHelp();return false});d.find("div.help-wrapper").css("z-index","20")},setupHelp:function(){var c,d=$("table.money-table").find("thead"),b,a;d.find("a.column-help").each(function(){b=$(this);c=b.parent();b.css({position:"absolute",top:"-15px",right:"-5px"});a=c.html();c.bind("click",function(){MT.hideHelp();MT.showHelp($(this));return false});c.html('<div class="help-wrapper">'+a+"</div>")})},ieVersion:function(){var c,a=3,d=document.createElement("div"),b=d.getElementsByTagName("i");while(d.innerHTML="<!--[if gt IE "+(++a)+"]><i></i><![endif]-->",b[0]){}return a>4?a:c},isIE:function(){if(MT.ieVersion()<9){var a=document.createElement("script");a.async="true";a.src="//www.staticwhich.co.uk/assets/scripts/ie-css-fix.js";document.getElementsByTagName("head")[0].appendChild(a)}},init:function(){$("#contextual-help-text").hide();MT.isIE();MT.setupHelp()}};which.VIDEO={initPortalPlayer:function(){var a=document.createElement("script");a.src="http://admin.brightcove.com/js/BrightcoveExperiences_all.js";if(a.addEventListener){a.addEventListener("load",function(){brightcove.createExperiences()},false)}else{a.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){brightcove.createExperiences()}}}document.getElementsByTagName("head")[0].appendChild(a)},playVideo:function(d){var c=$("object.BrightcoveExperience").attr("id"),a=brightcove.getExperience(c),b=a.getModule(APIModules.VIDEO_PLAYER);b.loadVideo(d)},pauseVideo:function(d){var c=$("object.BrightcoveExperience").attr("id"),a=brightcove.getExperience(c),b=a.getModule(APIModules.VIDEO_PLAYER);b.pause()},enableHighlightVideos:function(){$(document).ready(function(){$("#featured-videos").bind("click",function(b){var a=$(b.target).closest("div").attr("data-video-id");if(a){which.VIDEO.playVideo(a)}})})}};$(document).ready(function(){var c=document;$("html").addClass("js");if($("#in-page-nav.horizontal").size()>0){inPageNav.initHorizontal()}else{if(c.getElementById("in-page-nav")){inPageNav.init()}}if(c.getElementById("recommended-providers")){moneyTables.init()}if(c.getElementById("home-intro")){homepage.carousel()}if(c.getElementById("products-a-z")){which.productsHoverInit()}if($("#tabs").find("ul").length>0){which.navigationHoverEnhancer()}if(($("a.dialogbox").length>0&&!c.getElementById("signUp")&&!c.getElementById("log-in")&&!c.getElementById("signup-gift"))||(c.getElementById("contact-online-form"))){which.loadStylesheet("/assets/styles/jquery-ui.css");which.loadScript({src:"/assets/scripts/modal-window.js"},"")}if($("form.contact-form").length>0){which.contactUs()}$("#content").find(".contact-item").find(".google-map").show();if($("object.BrightcoveExperience").length>0){which.VIDEO.initPortalPlayer();which.VIDEO.enableHighlightVideos()}if(c.getElementById("video-gallery")){$("#video-gallery").tabs();if($("div.podcast-gallery").length>0&&c.createElement("audio").canPlayType){var a,d=c.querySelectorAll("audio"),b=d.length;$("#video-gallery").find("li").find("a").click(function(){for(a=b;a--;){d[a].pause()}return false})}}if(c.getElementById("socialbookmarks")||c.getElementById("image-gallery")){which.socialBookmarks();which.socialBookmarksInNews()}$STplayers=$("#main").find(".STplayer");if($STplayers.length>0){which.loadScript({src:"/assets/scripts/jquery.captionbox.js"},"");STglobalSettings={initialState:"closed"}}if(c.getElementById("image-gallery")){which.loadScript({src:"/assets/scripts/image-gallery-new.js"},"")}if(c.getElementById("photo-gallery")||c.getElementById("gallery")){which.loadScript({src:"/assets/scripts/gallery.js"},"")}if(c.getElementById("money")&&$("table.money-table").length>0){MT.init()}if(c.getElementById("charity-switch-form")){which.omnitureSwitchCharityIDs()}if($("span.js-print").length>0){printPageLinks()}if($("#report-listing.slider").length>0){which.contentSlide($("#report-listing.slider"))}if($('img[data-subscription="true"]').length>0){console.log("found sub icon");if(!which.helpBubble){return}which.helpBubble.init("#content",'img[data-subscription="true"]',{id:"subscription-icon-message"})}if($("#product-table").length>0&&$("#slider").length!==0){which.loadScript({src:"/assets/scripts/page-slide.js"},"")}if(c.getElementById("computing")&&c.getElementById("help-desk")){if(!which.helpBubble){return}which.helpBubble.init("#content","a.help-button")}if($(".modalSignup").length>0&&!(/iPhone|iPod|iPad|Android/.test(navigator.userAgent))&&!($.browser.msie&&parseInt($.browser.version,10)<=7)){which.modalSignup()}externalLinks();which.showForJS();hideForJS()});
which.helpBubble={adjWidth:140,adjVerticalPadding:40,fixedMsgIdSuffix:false,webPageWidth:960,outline:function(a){return'<div id="help-bubble">'+a+'<a href="#" class="close">Close</a><b></b></div>'},show:function(a){var l=arguments,j=(l[1]&&l[1].track)?l[1].track:"",d,k=(which.helpBubble.fixedMsgIdSuffix)?which.helpBubble.fixedMsgIdSuffix:a.attr("id"),b=$("#help-"+k).find(".help-content"),g=a.offset(),e=(a.width()-16)/2,c=g.left-this.adjWidth+e,m=g.top-this.adjVerticalPadding+2,h,f=which.helpBubble.outline(b.html());$("body").append(f);d=$("#help-bubble");h=d.height()+14;d.attr("data-index",j).css({top:m-h+"px",left:c+"px"}).find("a.close").on("click",function(){which.helpBubble.remove();return false});if(!which.helpBubble.availableWidth(g)){c=c-this.adjWidth+8;d.css("left",c+"px").addClass("bubble-align-left")}},availableWidth:function(e){var a,d,c,b;if(window.innerWidth&&window.innerHeight){b=window.innerWidth}else{if(document.body&&document.body.offsetWidth){b=document.body.offsetWidth}else{if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){b=document.documentElement.offsetWidth}}}a=((b-which.helpBubble.webPageWidth)/2);d=a+which.helpBubble.webPageWidth-e.left;c=a+d-45;if(c>which.helpBubble.adjWidth){return true}return false},remove:function(d){var c=document,a=c.getElementsByTagName("body"),b=c.getElementById("help-bubble");d=d||"fade";if(b){switch(d){case"immediate":a[0].removeChild(b);break;default:$("#help-bubble").fadeOut(function(){a[0].removeChild(b)})}return true}return false},currentIndex:function(){var a=document.getElementById("help-bubble");if(a){return parseInt(a.getAttribute("data-index"),10)}},init:function(b,c){var a=arguments;if(a[2]&&a[2].id){which.helpBubble.fixedMsgIdSuffix=a[2].id}$(b).on("click",c,function(){var e=which.helpBubble.currentIndex(),g=$(this),d=$(b).find(c),f=(d.index(g)*1)+1,h=(e===f)?which.helpBubble.remove():which.helpBubble.remove("immediate");if(!h||(e!==f)){which.helpBubble.show(g,{track:f})}return false});$("body").on("click",function(){which.helpBubble.remove()})}};
var which=which||{};which.MVT=which.MVT||{};which.MVT.liveStatus=false;(function(){if(document.getElementById("optimostMVTisLive")){var a=document.getElementById("optimostMVTisLive");if(a&&a.getAttribute("content")==="true"){which.MVT.liveStatus=true}}})();var optimost={isLive:which.MVT.liveStatus,liveUrl:"es/1611/c/1/u/which_live.js",qaUrl:"es/1611/c/1/u/which_staging.js",cDomain:"which.co.uk",es:[],cs:[],A:{},C:{},D:document,L:document.location,M:[],Q:{},T:new Date(),U:"",V:"2.7",Enabled:true,ST:"script",SA:{type:"text/javascript"},I:function(){var j=this.L.search;var m=this.D.cookie;if(j.length>3){for(var f=j.substring(1).split("&"),h=0,e=f.length;h<e;h++){var k=f[h].indexOf("=");if(k>0){this.Q[f[h].substring(0,k)]=unescape(f[h].substring(k+1))}}}if(m.length>3){for(var f=m.split(";"),h=0,d=f.length;h<d;h++){var g=f[h].split("=");while(g[0].substring(0,1)==" "){g[0]=g[0].substring(1,g[0].length)}if(g.length==2){this.C[g[0]]=unescape(g[1])}}}},B:function(){var b;this.A={};var a=this;this.A.D_ts=Math.round(a.T.getTime()/1000);this.A.D_tzo=a.T.getTimezoneOffset();this.A.D_loc=a.L.protocol+"//"+a.L.hostname+a.L.pathname;this.A.D_ckl=a.D.cookie.length;this.A.D_ref=a.D.referrer;if(typeof optrial=="object"){for(b in optrial){this.A[b]=optrial[b]}}for(b in this.Q){this.A[b]=this.Q[b]}for(b in this.C){if(b.substring(0,2)=="op"){this.A[b]=this.C[b]}}},S:function(){var a="";for(var b in this.A){if(this.A[b]!=null&&this.A[b]!=""){a+=(a.length>0?"&":(this.U.indexOf("?")>0?"&":"?"))+b+"="+escape(this.A[b])}}return this.U+a},SC:function(g,a,b,c){var f=new Date();f.setTime(f.getTime()+b*1000);this.D.cookie=g+"="+escape(a)+((b==null)?"":("; expires="+f.toGMTString()))+"; path=/"+((c==null)?"":(";domain="+c))},SLD:function(){var b=this.D.domain;var c=b.split(".");var a=c.length;if(a<2){b=null}else{if(!isNaN(c[a-1])&&!isNaN(c[a-2])){b=null}else{b="."+c[a-2]+"."+c[a-1]}}return b},R:function(g,j,i,h){if(this.Enabled){var a=true;if(g<1000){a=(Math.floor(Math.random()*1000)<g);if(j!=null){if(this.C[j]!=null){a=(this.C[j]!="mvt-no")}else{this.SC(j,a?"mvt-yes":"mvt-no",h,i)}}}if(a){var f="<"+this.ST+' src="'+this.S()+'"';for(n in this.SA){f+=(" "+n+'="'+this.SA[n]+'"')}f+="></"+this.ST+">";this.D.write(f)}}},addModule:function(a,b){this.M[a]=b},displayModule:function(a){if(typeof this.M[a]=="function"){this.M[a]()}},hasModules:function(){return count(this.M)>0}};optimost.I();var optrial=(typeof optrial=="object")?optrial:{};var opcounter=(typeof opcounter=="object")?opcounter:{};optimost.f=function(a){var b=optimost.L.protocol;return b+((b=="http:")?"//by.optimost.com/":"//by.essl.optimost.com/by/")+a};optimost.Experiment=function(b,a){if(typeof b!="string"){this.url=""}else{if(b.match(/trial\//)){b=b.substring(b.indexOf("trial/"));this.url=optimost.f(b)}else{this.url=""}}if(typeof a=="string"){this.modules=[];this.modules.push(a)}else{if(typeof a=="object"){this.modules=a}}this.enabled=true;this.ratio=1000;this.cookieName=null;this.domain=null;this.expiry=null;this.hideCSS="";this.showCSS="";this.trialCodeLow=false;this.run=function(d){if(this.url!=""&&optimost.Enabled){if((!this.trialCodeLow&&(typeof d!="string"||d!="low"))||(this.trialCodeLow&&d=="low")){this.attribute();var c=optimost;c.U=this.url;c.B();if(this.enabled){c.R(this.ratio,this.cookieName,this.domain,this.expiry)}}else{if(this.hideCSS!=""&&(typeof d!="string"||d!="low")){document.write("<style>"+this.hideCSS+"</style>");if(this.showCSS==""){this.showCSS=this.hideCSS.replace(/display(\s+)?\:(\s+)?none/g,"display:block !important").replace(/visibility(\s+)?\:(\s+)?hidden/g,"visibility:visible !important")}}}if(d!="low"){optimost.es.push(this)}}};this.attribute=function(){};this.dMs=function(){for(var c=0;c<this.modules.length;c++){optimost.displayModule(this.modules[c])}}};optimost.Counter=function(a){if(typeof a!="string"){this.url=""}else{if(a.match(/counter\//)){a=a.substring(a.indexOf("counter/"));this.url=optimost.f(a)}else{this.url=""}}this.enabled=true;this.attribute=function(){};this.add=function(){optimost.cs.push(this)};this.run=function(){if(this.url!=""&&optimost.Enabled){this.attribute();var c=optimost;c.U=this.url;var b=optrial;optrial=opcounter;c.B();optrial=b;var d="<"+c.ST+' src="'+c.S()+'"';for(n in c.SA){d+=(" "+n+'="'+c.SA[n]+'"')}d+="></"+c.ST+">";if(this.enabled){c.D.write(d)}}};this.add()};optimost.getC=function(a){if(typeof optimost=="object"){for(n in optimost.C){if(n==a){return optimost.C[n]}}}return null};optimost.setC=function(c,a,b){document.cookie=c+"="+escape(a)+";path=/"+((b==null)?"":(";domain="+b))};optimost.getDm=function(){var a=optimost.cDomain;if(typeof a=="string"&&document.domain.indexOf(a)!=-1){return a}else{return null}};optimost.tUrl=optimost.L.toString();optimost.P=((optimost.tUrl.split("//")[0]!="http:")?"https://by.essl":"http://es")+".optimost.com/";optimost.liveUrl=optimost.P+optimost.liveUrl.substring(optimost.liveUrl.indexOf("es/"));optimost.qaUrl=optimost.P+optimost.qaUrl.substring(optimost.qaUrl.indexOf("es/"));optimost.jsUrl=optimost.qaUrl;if(optimost.isLive==true){optimost.jsUrl=optimost.liveUrl}if(optimost.tUrl.indexOf("opglobalqa=true")!=-1){optimost.setC("opglobalqa","true",optimost.getDm());optimost.gQa=true}else{if(optimost.tUrl.indexOf("opglobalqa=false")!=-1){optimost.setC("opglobalqa","false",optimost.getDm());optimost.gQa=false}else{optimost.gQa=(optimost.getC("opglobalqa")=="true")}}if(optimost.gQa){optimost.jsUrl=optimost.qaUrl}optimost.day=Math.round(optimost.T.getTime()/(3600000*24));document.write('<script type="text/javascript" src="'+optimost.jsUrl+"?D_ds="+optimost.day+'"><\/script>\n');
var __stormJs="t1.stormiq.com/dcv4/jslib/sid2653_4.003.js";function downloadJSAtOnload(){var b,a,c;b=document.createElement("script");b.src="//www.staticwhich.co.uk/assets/5.9.4-SNAPSHOT/scripts/deferred.pack.min.js";if(b.addEventListener){b.addEventListener("load",function(){omnitureSiteCatalyst.exec()},false)}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){omnitureSiteCatalyst.exec()}}}document.body.appendChild(b);if(document.domain!=="www.shopcreator.com"){a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="//www.staticwhich.co.uk/assets/5.9.4-SNAPSHOT/scripts/summit/track.js";if(a.addEventListener){a.addEventListener("load",function(){stormInst(true)},false)}else{a.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){stormInst(true)}}}document.getElementsByTagName("head")[0].appendChild(a)}c=document.createElement("script");c.type="text/javascript";c.async=true;c.src="//which.resultspage.com/autosuggest/searchbox_suggest_v1.js";if(c.addEventListener){c.addEventListener("load",function(){sli_init()},false)}else{c.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){sli_init()}}}}if(window.addEventListener){window.addEventListener("load",downloadJSAtOnload,false)}else{if(window.attachEvent){window.attachEvent("onload",downloadJSAtOnload)}else{window.onload=downloadJSAtOnload}};
$(document).ready(function(){var a=$("#help-desk").validate({rules:{title:{required:true},firstName:{required:true},lastName:{required:true},emailAddress:{required:true,email:true},emailAddressConf:{required:true,email:true,equalTo:"#email"},membershipNumber:{required:true},skills:{required:true},problems:{required:true},problemsOther:{required:{depends:function(){return $("#problems").val()=="Other"}}},operatingSystem:{required:true},operatingSystemOther:{required:{depends:function(){return $("#operating-system").val()=="Other"}}},memory:{required:true},memoryOther:{required:{depends:function(){return $("#ram").val()=="Other"}}},processor:{required:true},processorOther:{required:{depends:function(){return $("#processor").val()=="Other"}}},connection:{required:true},accessInternet:{required:true},modemRouter:{required:true},wirelessNetwork:{required:true},otherInfo:{required:true,maxlength:500}},messages:{},errorPlacement:function(b,c){c.parent().siblings("p.error").remove();b.prependTo(c.parent().parent());generalFormError(a.numberOfInvalids(),"#form-error-1")},errorElement:'p class="no-label error"',onfocusout:false,onkeyup:false,success:"removed"});which.selectDrivenEnable("problems","Other","other-problem");which.selectDrivenEnable("operating-system","Other","other-operating-system");which.selectDrivenEnable("processor","Other","other-processor");which.selectDrivenEnable("ram","Other","other-ram")});
