define(["jquery","fr/lib/scripts/jquery.isotope.min"],function(c,a){console.info("module.filter");var b=function(){var g=c(".tpl_category .articleList"),f=c(".tpl_category aside .tagFilters a");g.isotope({animationOptions:{duration:750,easing:"linear",queue:false}});var d="";c(document).ready(function(){e("hidden",0)});c(".tpl_category aside .tagCloud").on("click","a",function(l){l.preventDefault();var j=c(this);if(j.hasClass("noRes")||j.hasClass("hidden")){return}var i=j.attr("data-filter"),k=j.parent(".tagCloud"),h=false;if(d.indexOf(i)>=0){d=d.replace(i,"");j.removeClass("on");h="remove tag"}else{d=d+i;j.addClass("on");h="add tag"}c.publish("analytics.interaction",{module:"mod.filters",key:h,val:i});g.isotope({filter:d});e("noRes",0)});function e(j,n){var i=f.length;while(i--){var m=c(f[i]),h=m.attr("data-filter"),k=g.find(h).not(".isotope-hidden").length;(k<=n)?m.addClass(j):m.removeClass(j)}}};return b()});