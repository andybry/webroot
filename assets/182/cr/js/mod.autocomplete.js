define(["jquery","fr/lib/jquery/jquery-ui-1.9.2.custom.min"],function(c,b){console.info("module.autocomplete");var d=false;c.widget("custom.catcomplete",c.ui.autocomplete,{_renderItem:function(e,f){return c("<li></li>").data("item.autocomplete",f).append("<a class='th"+f.category+"' href='"+f.url+"'>"+f.label+"</a>").appendTo(e)}});var a=c("#searchQuery");c("#search").on("submit",function(f){if(a.val().length===0){f.preventDefault()}c.publish("analytics.interaction",{module:"mod.autocomplete",key:"form submitted",val:c("#search").serialize()})});c("#searchQuery").catcomplete({delay:150,minLength:3,source:function(f,e){d=f.term;c.getJSON("/consumer-rights/search/?q="+f.term,function(g){g.results=g.results.slice(0,6);e(c.map(g.results,function(h){return{url:h.url,label:h.title,title:h.title.replace("<em>","").replace("</em>",""),value:h.name,category:(h.category)?h.category.charAt(0).toUpperCase()+h.category.slice(1):""}}))})},appendTo:"#search",position:{my:"right top",at:"right bottom"},select:function(e,f){c.publish("analytics.interaction",{module:"mod.autocomplete",key:"key:"+d,val:f.item.url});d=false;document.location=f.item.url;return false},change:function(e,f){},focus:function(e,f){c(e.target).val(f.item.title);return false}});return{}});