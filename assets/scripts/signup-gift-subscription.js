var SIGNUPTO={ADDRESS:{},VALIDATION:{makeRequiredRule:function(){},fieldErrorMessages:{}}};SIGNUPTO={clientSideTest:"",formErrors:{},initialPostTown:"",msgROIBeforeAddressLine1:'<p class="msgROIBeforeAddressLine1">Please enter your address</p>',processMsg:"",postCodeLookup:{searchHouseNumberSelector:"#lookupHouseNumberTo",searchPostcodeSelector:"#lookupPostCodeTo",addressDropDownSelector:"#selectAddressTo",addressLine0Selector:"#addressLine1To",addressLine1Selector:"#addressLine2To",townSelector:"#postTownTo",postcodeSelector:"#postCodeTo",errorMessages:{ERR01_AddressNotFound:"We were unable to find your address. Please try again or type your address below.",ERR02_TooManyResults:"Too many results.",ERR03_MissingHouseNumber:"Please enter a house number or name.",ERR04_MissingHouseNumberAndPostcode:"You need to provide your house name or number and postcode.",ERR05_MissingPostcode:"Please enter a UK postcode.",ERR06_InvalidPostcode:"Please enter a valid UK postcode.",ERR07_ConnectionProblem:"Sorry, there is a problem with the connection to the postcode lookup service.<br/>Please enter your details below instead.",ERRXX_UnknownProblem:"Sorry, an unknown problem occurred with the postcode lookup service.<br/>Please enter your details below instead."},helpMessages:{oneAddressFound:"We found one address matching the details you provided. If this address is not correct please edit the details below."}},country:{displayCountryText:'<div class="fieldWrapper displayCountryWrapper"><label>Country</label><span id="displayCountryLabelTo">[countryName]</span></div>',returnedFromServer:false,init:function(){if($("#addressLine1To").val()!==""||$("#addressLine2To").val()!==""||$("#postCodeTo").val()!==""||$("#postTownTo").val()!==""){this.returnedFromServer=true;SIGNUPTO.country.select($("#countryIdTo option:selected").val());$("#lookupPostCodeTo").attr("value",$("#postCode").val());$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().show()}else{$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().hide()}},initGiftSub:function(){if(($("#addressLine1To").val()!==""&&$("#addressLine1To").val()!==$("#addressLine1To").attr("placeholder"))||($("#addressLine2To").val()!==""&&$("#addressLine2To").val()!==$("#addressLine2To").attr("placeholder"))||($("#postCodeTo").val()!==""&&$("#postCodeTo").val()!==$("#postCodeTo").attr("placeholder"))||($("#postTownTo").val()!==""&&$("#postTownTo").val()!==$("#postTownTo").attr("placeholder"))){this.returnedFromServer=true;SIGNUPTO.country.select($("#countryIdTo option:selected").val());$("#lookupPostCodeTo").attr("value",$("#postCodeTo").val());$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().show()}else{$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().hide()}},select:function(a){if(typeof a==="undefined"||a===null){return}if(a.toLowerCase()==="republic of ireland"){SIGNUPTO.country.ROI(a)}else{SIGNUPTO.country.UK(a)}},ROI:function(c){var b=$("#addressLine1To").parent().html(),a=$("label[for='postCodeTo']");$("#lookupPostCodeTo, #lookupHouseNumberTo, #findAddressButtonTo, #selectAddressTo").parent().hide();$("#addressIntro2To").hide();if(b.indexOf(SIGNUPTO.msgROIBeforeAddressLine1)===-1){$("#addressLine1To").parent().parent().before(SIGNUPTO.msgROIBeforeAddressLine1)}$("#countryIdTo").blur();a.find(".mandatory").hide();a.append('<span class="not-mandatory">&nbsp;&nbsp;</span>');delete SIGNUPTO.VALIDATION.validationRules.postCode;delete SIGNUPTO.VALIDATION.validationRules.lookupPostCode;if(!this.returnedFromServer){$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").val("")}else{this.returnedFromServer=false}$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().show();SIGNUPTO.country.displayLabel(c)},UK:function(b){var a=$("label[for='postCodeTo']");$("#lookupPostCodeTo, #lookupHouseNumberTo, #findAddressButtonTo").parent().show();$("#addressIntro1To, #addressIntro2To").show();$("p.msgROIBeforeAddressLine1").remove();a.find(".not-mandatory").hide();a.find(".mandatory").show();SIGNUPTO.VALIDATION.validationRules.postCode=SIGNUPTO.addressRequired;SIGNUPTO.VALIDATION.validationRules.lookupPostCode=SIGNUPTO.VALIDATION.postCodeRequired;if(this.returnedFromServer){this.returnedFromServer=false}else{$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").val("");$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().hide()}SIGNUPTO.country.displayLabel(b)},displayLabel:function(a){if($("#displayCountryLabelTo").length>0){$("#displayCountryLabelTo").html(a)}else{$("#postCodeTo").parent().parent().after(SIGNUPTO.country.displayCountryText.replace("[countryName]",a))}}},removeErrorField:function(a){a.removeClass("error").removeClass("fieldError");a.parents("div.fieldWrapper, div.fieldWrapperInline").find(".error").remove().end().find("img").remove()},applyErrorField:function(a,d){var c,b;if(SIGNUPTO.VALIDATION.validationRules){b=SIGNUPTO.VALIDATION.validationRules[a.attr("id")];c=b(a.val())}else{c=a.attr("title")}$('<p class="error">'+c+"</p>").prependTo(d)},processSignup:function(){window.scrollTo(0,0);$("#signUp").fadeTo("normal",0.2);$("#processing").show();$("select").hide();$("#confirmOrder").click(function(a){a.preventDefault()})},boxNumbers:function(a){var c,b="";for(c=0;c<a.length;c+=1){b+="<span>"+a.substring(c,c+1)+"</span>"}return b},removeDuplicates:function(b){var e,c="",d,a=[];for(d=0;d<b.length;d+=1){e=b[d];if(e!==c){a[a.length]=e}c=e}return a},removeThrobber:function(){$("#throbber").remove()},displayThrobber:function(){SIGNUPTO.removeThrobber();$("#findAddressButtonTo").after('<img id="throbber" src="/assets/images/content/sign-up/throbber.gif" alt=""/>')},removeError:function(){$("#errorMessage").remove();$("#lookupPostCodeTo").parent().find(".error").remove();$("#lookupHouseNumberTo, #lookupPostCodeTo, #selectAddressTo, #addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").removeClass("fieldError").parent().find("img").remove()},displayLocalError:function(b,a,c){var d=b;SIGNUPTO.removeThrobber();if(SIGNUPTO.postCodeLookup.errorMessages[b]){d=SIGNUPTO.postCodeLookup.errorMessages[b]}else{d=SIGNUPTO.postCodeLookup.errorMessages.ERRXX_UnknownProblem}if(c){SIGNUPTO.removeError()}if(SIGNUPTO.clientSideTest===true){SIGNUPTO.VALIDATION.validateField(a,false)}else{b="";$(a).parent().prev().append('<div id="errorMessage"><p class="error">'+d+"</p></div>")}if(b===""||b==="ERR01_AddressNotFound"||b==="ERR07_ConnectionProblem"||b==="ERRXX_UnknownProblem"){$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().show();SIGNUPTO.country.displayLabel("United Kingdom")}},displayRemoteError:function(b,c,a){SIGNUPTO.displayLocalError(b.responseText,SIGNUPTO.postCodeLookup.addressDropDownSelector)},showAddressFields:function(){$("#addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().show();if($("#addressLine1To").val()!==""&&$("#addressLine1To").val()!==$("#addressLine1To").attr("placeholder")){$("#addressLine1To").removeClass("placeholder")}if($("#addressLine2To").val()!==""&&$("#addressLine2To").val()!==$("#addressLine2To").attr("placeholder")){$("#addressLine2To").removeClass("placeholder")}if($("#postCodeTo").val()!==""&&$("#postCodeTo").val()!==$("#postCodeTo").attr("placeholder")){$("#postCodeTo").removeClass("placeholder")}if($("#postTownTo").val()!==""&&$("#postTownTo").val()!==$("#postTownTo").attr("placeholder")){$("#postTownTo").removeClass("placeholder")}},showSelectField:function(){$("#selectAddressTo").parent().show()},getAddressLineDetails:function(f,e,a){var g,c=a,b,d;if(f&&e){if($.isArray(f)){for(b=0;b<f.length;b+=1){g=f[b];d=g.lineType;if(d===e){c=g.details;if(!c||c===null){c=a}return c}}}else{c=f.details}}return c},populateDropDownWithResults:function(c){var a,b=$(SIGNUPTO.postCodeLookup.addressDropDownSelector);$(b).children().remove();$(b).append("<option value='-1'>Please select...</option>");if($.isArray(c)){for(a=0;a<c.length;a+=1){$(b).append("<option value='"+c[a].addressId+"'>"+SIGNUPTO.getAddressLineDetails(c[a].addressLines,"singleLineAddress")+"</option>")}}else{$(b).append("<option value='"+c.addressId+"'>"+SIGNUPTO.getAddressLineDetails(c.addressLines,"singleLineAddress")+"</option>")}},populateAddressDetails:function(b){var f=b.addressLines,e=SIGNUPTO.getAddressLineDetails(f,"addressLine_1","").substring(0,27),d=SIGNUPTO.getAddressLineDetails(f,"addressLine_2","").substring(0,31),c=SIGNUPTO.getAddressLineDetails(f,"townCity","").substring(0,31),a=SIGNUPTO.getAddressLineDetails(f,"postCode","");$(SIGNUPTO.postCodeLookup.addressLine0Selector).val(e);$(SIGNUPTO.postCodeLookup.addressLine1Selector).val(d);$(SIGNUPTO.postCodeLookup.townSelector).val(c);$(SIGNUPTO.postCodeLookup.postcodeSelector).val(a);SIGNUPTO.ADDRESS.lookupCityValue=c;SIGNUPTO.showAddressFields()},displaySelectedAddress:function(a){SIGNUPTO.populateAddressDetails(a.address)},clearSelectedAddress:function(){$(SIGNUPTO.postCodeLookup.addressLine0Selector).val("");$(SIGNUPTO.postCodeLookup.addressLine1Selector).val("");$(SIGNUPTO.postCodeLookup.townSelector).val("");$(SIGNUPTO.postCodeLookup.postcodeSelector).val("")},displayOneAddress:function(a){$("#lookupHouseNumberTo, #lookupPostCodeTo, #findAddressButtonTo, #outsideUKLinkTo").parent().remove();$("#selectAddressTo").parent().remove();$("#addressIntro1To").remove();$("#addressIntro2To").html('<p class="alertMsg"><img height="19" width="21" alt="tick" src="/assets/images/content/sign-up/correct-alert.png"/>'+SIGNUPTO.postCodeLookup.helpMessages.oneAddressFound+"</p>");$("#lookupCountryTo").next().hide();$("#countryTo, #lookupCountryTo").hide();$("#countryDisplayTo").html("");$("#countryDisplayTo").parent().show();SIGNUPTO.populateAddressDetails(a.address);SIGNUPTO.country.displayLabel($("#countryIdTo option:selected").text())},lookupAndShowAddress:function(a,d){var c=(d)?SIGNUPTO.displayOneAddress:SIGNUPTO.displaySelectedAddress,b="/address/address/"+a;SIGNUPTO.removeError();SIGNUPTO.clearSelectedAddress();if($(SIGNUPTO.postCodeLookup.addressDropDownSelector).val()!=="-1"){$.ajax({type:"GET",dataType:"json",timeout:5000,url:b,success:c,error:SIGNUPTO.displayRemoteError})}},addressSelected:function(){var a=$(SIGNUPTO.postCodeLookup.addressDropDownSelector+" option:selected").val();SIGNUPTO.lookupAndShowAddress(a,false)},clearAddressesDropDown:function(){$(SIGNUPTO.postCodeLookup.addressDropDownSelector).children().remove()},DisplayPostCodeSearchResults:function(a){var b=a.addressList.addresses;this.showResults=function(){if($.isArray(b)){SIGNUPTO.populateDropDownWithResults(b);SIGNUPTO.showSelectField();SIGNUPTO.showAddressFields()}else{SIGNUPTO.lookupAndShowAddress(b.addressId,true)}SIGNUPTO.removeThrobber()}},delayDisplayResults:function(a){clearTimeout(SIGNUPTO.dtimeout);var b=new SIGNUPTO.DisplayPostCodeSearchResults(a);SIGNUPTO.dtimeout=setTimeout(b.showResults,200)},lookupAddresses:function(){$("#findAddressButtonTo").blur();$("#selectAddressTo").parent().hide();SIGNUPTO.clientSideTest=false;if(!SIGNUPTO.VALIDATION.validateInputs()){return}SIGNUPTO.removeError();SIGNUPTO.displayThrobber();SIGNUPTO.clearAddressesDropDown();var c=$(SIGNUPTO.postCodeLookup.searchHouseNumberSelector).val(),b=$(SIGNUPTO.postCodeLookup.searchPostcodeSelector).val();if(c===$(SIGNUPTO.postCodeLookup.searchHouseNumberSelector).attr("placeholder")){c=""}if(b===$(SIGNUPTO.postCodeLookup.searchPostcodeSelector).attr("placeholder]")){b=""}var a="/address/addresses/"+(c===""?"*":c)+"/"+(b===""?" ":b)+"/";$.ajax({type:"GET",dataType:"json",timeout:5000,url:a,success:SIGNUPTO.delayDisplayResults,error:SIGNUPTO.displayRemoteError})},showHelp:function(b,d){var a=$(b).height(),c=$(b).offset().top;if(SIGNUPTO.hideHelpTimer){clearTimeout(SIGNUPTO.hideHelpTimer);SIGNUPTO.hideHelpTimer=null}SIGNUPTO.helpArrow.css("top",c+"px");SIGNUPTO.helpBrace.height(a);SIGNUPTO.helpArrow.height(a).show();$("#contextualHelp").find("div").html(d).end().css("top",c+"px").show()},showHelpForField:function(e){var c=$(e),b=c.parents("div.helpWrapper"),d=".h_"+e.id,f=$("<p></p>"),a=$(d+" + p.helpText").html();f.html(a);if(a){SIGNUPTO.showHelp(b,f)}},initStart:function(){$("#findAddressButtonTo").click(SIGNUPTO.lookupAddresses);$(SIGNUPTO.postCodeLookup.addressDropDownSelector).change(SIGNUPTO.addressSelected);$("#countryIdTo").change(function(){SIGNUPTO.country.select($(this).val())});SIGNUPTO.country.initGiftSub();SIGNUPTO.ADDRESS.setPostTownErrorStatus()},initGiftSub:function(){$(".hideLabel").hide();$("#signup-email-confirm").hide();$("[placeholder]").focus(function(){var a=$(this);if(a.val()===a.attr("placeholder")){a.val("");a.removeClass("placeholder")}}).blur(function(){var a=$(this);if(a.val()===""||a.val()===a.attr("placeholder")){a.addClass("placeholder");a.val(a.attr("placeholder"))}}).blur();$("#registrationForm").submit(function(){$(this).find("[placeholder]").each(function(){var b=$(this);if(b.val()==b.attr("placeholder")){b.val("")}});if($("#emailAddressTo").val()===""){var a=this;$("#signup-email-confirm").dialog({title:"Recipient email request",resizable:false,width:400,dialogClass:"signup-email-confirm",modal:true,position:["center",100],buttons:{"Add recipient email":function(){$(this).dialog("close");$("[placeholder]").blur();$("#emailAddressTo").focus()},"Continue anyway":function(){a.submit()}}});$("#signup-email-confirm").dialog("open");return false}})}};SIGNUPTO.VALIDATION={makeRequiredRule:function(a,b){var d,e=$(a).val();try{d=SIGNUPTO.VALIDATION.fieldErrorMessages[b]}catch(c){}if(!jQuery.trim(e)){return d}else{return""}},fieldErrorMessages:{addressLine1:"Please enter address line 1.",countryId:"Please select a country.",emailAddressUsername:"If you want to use an email address as your username, it must be the same as the one given in the Email address field.",emailAddress:"Please enter your email address.",emailAddressInvalid:"Please enter a valid email address.",emailAddress2:"This email address does not match that given above.",emailAddressMsg2:"Please re-enter your email address.",firstName:"Please enter first name.",houseNumber:SIGNUPTO.postCodeLookup.errorMessages.ERR03_MissingHouseNumber,invalidPostCode:SIGNUPTO.postCodeLookup.errorMessages.ERR06_InvalidPostcode,lastName:"Please enter last name.",postTown:"Please enter a Town or City.",postCode:SIGNUPTO.postCodeLookup.errorMessages.ERR05_MissingPostcode,titleField:"Please select a title."},isUKPostcode:function(a){var b=new RegExp("^[A-Z]{1,2}[0-9R][0-9A-Z]?[ ]?[0-9][ABD-HJLNP-UW-Z]{2}$","i");return b.test(a)},isUKForcesPostcode:function(a){var b=new RegExp("^(BFPO[ ]?[0-9]{1,4})$","i");return b.test(a)},postCodeRequired:function(a){if(a.length===0){return SIGNUPTO.VALIDATION.fieldErrorMessages.postCode}if((!SIGNUPTO.VALIDATION.isUKPostcode(a)&&!SIGNUPTO.VALIDATION.isUKForcesPostcode(a))){return SIGNUPTO.VALIDATION.fieldErrorMessages.invalidPostCode}},validateEmailAddress:function(a,b){if(!b){b="emailAddress"}if(a.length===0&&b==="emailAddress"){return SIGNUPTO.VALIDATION.fieldErrorMessages.emailAddress}if(!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)||(a.indexOf("/")>0)){switch(b){case"username":return SIGNUPTO.VALIDATION.fieldErrorMessages.emailAddressUsername;default:return SIGNUPTO.VALIDATION.fieldErrorMessages.emailAddressInvalid}}},validationRules:{titleFieldTo:function(){return SIGNUPTO.VALIDATION.makeRequiredRule("#titleFieldTo","titleFieldTo")},firstNameTo:function(){return SIGNUPTO.VALIDATION.makeRequiredRule("#firstNameTo","firstNameTo")},lastNameTo:function(){return SIGNUPTO.VALIDATION.makeRequiredRule("#lastNameTo","lastNameTo")},addressLine1To:function(){return SIGNUPTO.VALIDATION.makeRequiredRule("#addressLine1To","addressLine1To")},postTownTo:function(){SIGNUPTO.ADDRESS.checkCity();return SIGNUPTO.VALIDATION.makeRequiredRule("#postTownTo","postTownTo")},postCodeTo:function(a){return SIGNUPTO.VALIDATION.postCodeRequired(a)},lookupPostCodeTo:function(a){return SIGNUPTO.VALIDATION.postCodeRequired(a)},countryIdTo:function(){return SIGNUPTO.VALIDATION.makeRequiredRule("#countryIdTo","countryRequired")},emailAddressTo:function(a){return SIGNUPTO.VALIDATION.validateEmailAddress(a)},emailAddress2To:function(a){if(a!==$("input#emailAddressTo").val()){return SIGNUPTO.VALIDATION.fieldErrorMessages.emailAddress2}if(!$.trim(a)){return SIGNUPTO.VALIDATION.fieldErrorMessages.emailAddressMsg2}}},validateField:function(e,d){var c,a=$(e),b,f;SIGNUPTO.removeErrorField(a);if(a.parents(".childrenAreHidden").length>0){delete SIGNUPTO.formErrors[a.attr("id")];return true}if(SIGNUPTO.VALIDATION.validationRules){b=SIGNUPTO.VALIDATION.validationRules[a.attr("id")]}if(typeof b==="undefined"){return true}if(a.val()===a.attr("placeholder")){c=b("")}else{c=b(a.val())}f=a.parents("div.fieldWrapper, div.fieldWrapperInline");if(c){SIGNUPTO.formErrors[a.attr("id")]=c;SIGNUPTO.applyErrorField(a,f);return false}else{delete SIGNUPTO.formErrors[a.attr("id")];return true}},isValid:function(c){var a=$(c),b=SIGNUPTO.VALIDATION.validationRules[a.attr("id")];if(typeof b==="undefined"){return true}if(b(a.val())){return false}return true},validateInputs:function(){var a=true,b=$(SIGNUPTO.postCodeLookup.searchPostcodeSelector).val().replace(/^\s+|\s+$/g,"");if(b===$(SIGNUP.postCodeLookup.searchPostcodeSelector).attr("placeholder")){b=""}if(b===""){SIGNUPTO.clientSideTest=true;SIGNUPTO.displayLocalError(SIGNUPTO.postCodeLookup.errorMessages.ERR05_MissingPostcode,SIGNUPTO.postCodeLookup.searchPostcodeSelector,true);a=false}else{if(!SIGNUPTO.VALIDATION.isUKPostcode(b)&&!SIGNUPTO.VALIDATION.isUKForcesPostcode(b)){SIGNUPTO.clientSideTest=true;SIGNUPTO.displayLocalError(SIGNUPTO.postCodeLookup.errorMessages.ERR06_InvalidPostcode,SIGNUPTO.postCodeLookup.searchPostcodeSelector,true);a=false}}return a}};SIGNUPTO.ADDRESS={addressIntro1:'<p id="addressIntro1To">Please select your country of residence</p>',addressIntro2:'<p id="addressIntro2To">Use the quick address search facility and select your address from the results</p>',lookupHouseNumHTMLGiftSub:'<div class="fieldWrapper"><label for="lookupHouseNumberTo" class="hideLabel">House number or name</label><input maxlength="27" type="text" name="lookupHouseNumber" id="lookupHouseNumberTo" placeholder="House number or name" class="text skipValidation" /></div>',lookupPostCodeGiftSub:'<div class="fieldWrapper"><label for="lookupPostCodeTo" class="hideLabel">Postcode (e.g. SE5 7TR)</label><input maxlength="8" type="text" name="lookupPostCode" id="lookupPostCodeTo" placeholder="Postcode (e.g. SE5 7TR)" class="text"/></div><div class="fieldWrapper find-address"><a href="#" id="findAddressButtonTo" title="Find address" onclick="return false;" class="signup-button grey small left">Find address</a></div><div class="fieldWrapper"><p class="qasResultMessage">Please select your address from the drop-down, if it is not available then select the closest match and edit it</p><label for="selectAddressTo" class="hideLabel">Select a possible match</label><select id="selectAddressTo"></select></div>',setPostTownErrorStatus:function(){var a,b=document.getElementById("postTownTo").parentNode.getElementsByTagName("p");if(b.length>0){for(a=0;a<b.length;a=a+1){if(b[a].className.indexOf("error")>-1){SIGNUPTO.ADDRESS.isPostTownAnError="1";break}}}else{SIGNUPTO.ADDRESS.isPostTownAnError="0"}},isPostTownAnError:"",checkCity:function(){var e=document.getElementById("cityModifiedTo"),b=document.getElementById("postTownTo").value,a=(SIGNUPTO.initialPostTown.length>0)?SIGNUPTO.initialPostTown:SIGNUPTO.ADDRESS.lookupCityValue,d=SIGNUPTO.ADDRESS.lookupCityValue||"",f=SIGNUPTO.ADDRESS.isPostTownAnError,c={"0000":true,"0011":false,"0010":true,"1000":true,"1100":true,"1011":false,"0100":false};f+=(a===b)?"1":"0";f+=(d.length>0)?"1":"0";f+=(d===b)?"1":"0";e.value=c[f]||true},init:function(){var a=$("#addressDetailsTo").parent(),b=$("#countryWrapperTo").html();$("#countryWrapperTo").children().remove();$("#countryWrapperTo").hide();a.prepend(SIGNUPTO.ADDRESS.addressIntro1+b+SIGNUPTO.ADDRESS.addressIntro2+SIGNUPTO.ADDRESS.lookupHouseNumHTML+SIGNUPTO.ADDRESS.lookupPostCode);$("#selectAddressTo, #addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().hide();$("#outsideUKLinkTo").css("display","inline")},initGiftSub:function(){var a=$("#addressDetailsTo").parent(),b=$("#countryWrapperTo").html();$("#countryWrapperTo").children().remove();$("#countryWrapperTo").hide();a.prepend(SIGNUPTO.ADDRESS.addressIntro1+b+SIGNUPTO.ADDRESS.addressIntro2+SIGNUPTO.ADDRESS.lookupHouseNumHTMLGiftSub+SIGNUPTO.ADDRESS.lookupPostCodeGiftSub);$("#selectAddressTo, #addressLine1To, #addressLine2To, #postCodeTo, #postTownTo").parent().hide()}};$(document).ready(function(){SIGNUPTO.initStart()});